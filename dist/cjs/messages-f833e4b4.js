"use strict";const e={deserialize:e=>Object.assign(Error(e.message),{name:e.name,stack:e.stack}),serialize:e=>({__error_marker:"$$error",message:e.message,name:e.name,stack:e.stack})};let r={deserialize(r){return(t=r)&&"object"==typeof t&&"__error_marker"in t&&"$$error"===t.__error_marker?e.deserialize(r):r;var t},serialize:r=>r instanceof Error?e.serialize(r):r};const t=()=>"function"==typeof Symbol,o=e=>t()&&Boolean(Symbol[e]),n=e=>o(e)?Symbol[e]:"@@"+e;o("asyncIterator")||(Symbol.asyncIterator=Symbol.asyncIterator||Symbol.for("Symbol.asyncIterator"));const s=n("iterator"),i=n("observable"),c=n("species");function u(e,r){const t=e[r];if(null!=t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t}}function a(e){let r=e.constructor;return void 0!==r&&(r=r[c],null===r&&(r=void 0)),void 0!==r?r:_}function l(e){l.log?l.log(e):setTimeout(()=>{throw e},0)}function f(e){Promise.resolve().then(()=>{try{e()}catch(e){l(e)}})}function p(e){const r=e._cleanup;if(void 0!==r&&(e._cleanup=void 0,r))try{if("function"==typeof r)r();else{const e=u(r,"unsubscribe");e&&e.call(r)}}catch(e){l(e)}}function b(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function h(e,r,t){e._state="running";const o=e._observer;try{const n=o?u(o,r):void 0;switch(r){case"next":n&&n.call(o,t);break;case"error":if(b(e),!n)throw t;n.call(o,t);break;case"complete":b(e),n&&n.call(o)}}catch(e){l(e)}"closed"===e._state?p(e):"running"===e._state&&(e._state="ready")}function y(e,r,t){if("closed"!==e._state)return"buffering"===e._state?(e._queue=e._queue||[],void e._queue.push({type:r,value:t})):"ready"!==e._state?(e._state="buffering",e._queue=[{type:r,value:t}],void f(()=>function(e){const r=e._queue;if(r){e._queue=void 0,e._state="ready";for(const t of r)if(h(e,t.type,t.value),"closed"===e._state)break}}(e))):void h(e,r,t)}class m{constructor(e,r){this._cleanup=void 0,this._observer=e,this._queue=void 0,this._state="initializing";const t=new d(this);try{this._cleanup=r.call(void 0,t)}catch(e){t.error(e)}"initializing"===this._state&&(this._state="ready")}get closed(){return"closed"===this._state}unsubscribe(){"closed"!==this._state&&(b(this),p(this))}}class d{constructor(e){this._subscription=e}get closed(){return"closed"===this._subscription._state}next(e){y(this._subscription,"next",e)}error(e){y(this._subscription,"error",e)}complete(){y(this._subscription,"complete")}}class _{constructor(e){if(!(this instanceof _))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof e)throw new TypeError("Observable initializer must be a function");this._subscriber=e}subscribe(e,r,t){return"object"==typeof e&&null!==e||(e={next:e,error:r,complete:t}),new m(e,this._subscriber)}pipe(e,...r){let t=this;for(const o of[e,...r])t=o(t);return t}tap(e,r,t){const o="object"!=typeof e||null===e?{next:e,error:r,complete:t}:e;return new _(e=>this.subscribe({next(r){o.next&&o.next(r),e.next(r)},error(r){o.error&&o.error(r),e.error(r)},complete(){o.complete&&o.complete(),e.complete()},start(e){o.start&&o.start(e)}}))}forEach(e){return new Promise((r,t)=>{if("function"!=typeof e)return void t(new TypeError(e+" is not a function"));function o(){n.unsubscribe(),r()}const n=this.subscribe({next(r){try{e(r,o)}catch(e){t(e),n.unsubscribe()}},error:t,complete:r})})}map(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(a(this))(r=>this.subscribe({next(t){let o=t;try{o=e(t)}catch(e){return r.error(e)}r.next(o)},error(e){r.error(e)},complete(){r.complete()}}))}filter(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(a(this))(r=>this.subscribe({next(t){try{if(!e(t))return}catch(e){return r.error(e)}r.next(t)},error(e){r.error(e)},complete(){r.complete()}}))}reduce(e,r){if("function"!=typeof e)throw new TypeError(e+" is not a function");const t=a(this),o=arguments.length>1;let n=!1,s=r;return new t(r=>this.subscribe({next(t){const i=!n;if(n=!0,!i||o)try{s=e(s,t)}catch(e){return r.error(e)}else s=t},error(e){r.error(e)},complete(){if(!n&&!o)return r.error(new TypeError("Cannot reduce an empty sequence"));r.next(s),r.complete()}}))}concat(...e){const r=a(this);return new r(t=>{let o,n=0;return function s(i){o=i.subscribe({next(e){t.next(e)},error(e){t.error(e)},complete(){n===e.length?(o=void 0,t.complete()):s(r.from(e[n++]))}})}(this),()=>{o&&(o.unsubscribe(),o=void 0)}})}flatMap(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");const r=a(this);return new r(t=>{const o=[],n=this.subscribe({next(n){let i;if(e)try{i=e(n)}catch(e){return t.error(e)}else i=n;const c=r.from(i).subscribe({next(e){t.next(e)},error(e){t.error(e)},complete(){const e=o.indexOf(c);e>=0&&o.splice(e,1),s()}});o.push(c)},error(e){t.error(e)},complete(){s()}});function s(){n.closed&&0===o.length&&t.complete()}return()=>{o.forEach(e=>e.unsubscribe()),n.unsubscribe()}})}[i](){return this}static from(e){const r="function"==typeof this?this:_;if(null==e)throw new TypeError(e+" is not an object");const t=u(e,i);if(t){const o=t.call(e);if(Object(o)!==o)throw new TypeError(o+" is not an object");return function(e){return e instanceof _}(o)&&o.constructor===r?o:new r(e=>o.subscribe(e))}if(o("iterator")){const t=u(e,s);if(t)return new r(r=>{f(()=>{if(!r.closed){for(const o of t.call(e))if(r.next(o),r.closed)return;r.complete()}})})}if(Array.isArray(e))return new r(r=>{f(()=>{if(!r.closed){for(const t of e)if(r.next(t),r.closed)return;r.complete()}})});throw new TypeError(e+" is not observable")}static of(...e){return new("function"==typeof this?this:_)(r=>{f(()=>{if(!r.closed){for(const t of e)if(r.next(t),r.closed)return;r.complete()}})})}static get[c](){return this}}t()&&Object.defineProperty(_,Symbol("extensions"),{value:{symbol:i,hostReportError:l},configurable:!0});const w=Symbol("thread.errors"),x=Symbol("thread.events"),v=Symbol("thread.terminate"),g=Symbol("thread.transferable"),E=Symbol("thread.worker");var T,k;(T=exports.MasterMessageType||(exports.MasterMessageType={})).cancel="cancel",T.run="run",(k=exports.WorkerMessageType||(exports.WorkerMessageType={})).error="error",k.init="init",k.result="result",k.running="running",k.uncaughtError="uncaughtError",exports.$errors=w,exports.$events=x,exports.$terminate=v,exports.$worker=E,exports.Observable=_,exports.Transfer=function(e,r){if(!r){if(!(t=e)||"object"!=typeof t)throw Error();r=[e]}var t;return{[g]:!0,send:e,transferables:r}},exports.deserialize=function(e){return r.deserialize(e)},exports.isTransferDescriptor=function(e){return e&&"object"==typeof e&&e[g]},exports.serialize=function(e){return r.serialize(e)};
